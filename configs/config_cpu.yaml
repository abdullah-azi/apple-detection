# Configuration for CPU-Only Systems
# Optimized for Intel Core i5-6200U (2 cores, 16GB RAM)

# Data Configuration
data:
  root_dir: "data"
  images:
    train: "data/images/train"
    val: "data/images/val"
    test: "data/images/test"
  annotations:
    train: "data/annotations/train"
    val: "data/annotations/val"
    test: "data/annotations/test"
  annotation_format: "yolo"
  class_names: ["apple"]
  num_classes: 1

# Model Configuration (CPU-optimized)
model:
  architecture: "yolo"
  version: "v5"
  size: "n"  # Nano - smallest and fastest for CPU
  pretrained: true
  input_size: [416, 416]  # Smaller than 640x640 for faster processing
  normalize: true
  normalization_mean: [0.485, 0.456, 0.406]
  normalization_std: [0.229, 0.224, 0.225]

# Training Configuration (CPU-optimized)
training:
  num_epochs: 50  # Start with fewer epochs for testing
  batch_size: 4  # Small batch size for CPU (4-8 recommended)
  num_workers: 2  # Match your 2 CPU cores
  pin_memory: false  # Disable for CPU
  learning_rate: 0.001
  lr_scheduler: "cosine"
  lr_warmup: true
  lr_warmup_epochs: 3
  optimizer: "adam"
  weight_decay: 0.0005
  gradient_clip: 10.0
  
  # Loss configuration
  loss:
    type: "combined"
    localization_weight: 1.0
    classification_weight: 1.0
    confidence_weight: 1.0
  
  # Validation
  val_frequency: 1
  val_batch_size: 8
  
  # Checkpointing
  save_checkpoint: true
  checkpoint_frequency: 5
  save_best_only: true
  monitor_metric: "val_loss"
  monitor_mode: "min"
  
  # Early stopping
  early_stopping: true
  early_stopping_patience: 10
  early_stopping_min_delta: 0.001

# Evaluation Configuration
evaluation:
  metrics: ["iou", "precision", "recall"]
  iou_threshold: 0.5
  confidence_threshold: 0.25
  save_visualizations: true
  visualization_format: "png"

# Inference Configuration
inference:
  checkpoint_path: "checkpoints/best_model.pth"
  device: "cpu"  # Explicitly CPU
  confidence_threshold: 0.25
  nms_threshold: 0.45
  max_detections: 100
  input_size: [416, 416]

# Preprocessing Configuration
preprocessing:
  resize:
    enabled: true
    target_size: [416, 416]
    maintain_aspect_ratio: false
  normalize: true
  normalization_method: "imagenet"

# Augmentation Configuration (light for CPU)
augmentation:
  enabled: true
  horizontal_flip:
    enabled: true
    probability: 0.5
  rotation:
    enabled: false  # Disable rotation for CPU (slower)
    probability: 0.5
    max_angle: 15
  scale:
    enabled: true
    probability: 0.5
    min_scale: 0.9
    max_scale: 1.1  # Smaller range for CPU
  brightness:
    enabled: true
    probability: 0.5
  contrast:
    enabled: true
    probability: 0.5
  saturation:
    enabled: false  # Disable for CPU

# Path Configuration
paths:
  data_root: "data"
  checkpoints_dir: "checkpoints"
  results_dir: "results"
  logs_dir: "logs"

# Hardware Configuration (CPU-only)
hardware:
  device: "cpu"  # Explicitly set to CPU
  num_workers: 2  # Match your 2 CPU cores
  pin_memory: false  # Disable for CPU
  mixed_precision: false  # Not available for CPU

# Logging Configuration
logging:
  level: "INFO"
  console: true
  file: true
  log_file: "logs/training.log"
  log_every_n_steps: 10
  log_every_n_epochs: 1

